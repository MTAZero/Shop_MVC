GO
	USE MASTER
GO
	DROP DATABASE SHOP_MVC
GO
	CREATE DATABASE SHOP_MVC
GO
	USE SHOP_MVC
GO
	CREATE TABLE NHASANXUAT(
		ID INT IDENTITY PRIMARY KEY,
		TEN NVARCHAR(MAX)
	)
GO
	CREATE TABLE LOAISANPHAM(
		ID INT IDENTITY PRIMARY KEY,
		TEN NVARCHAR(MAX)
	)
GO
	CREATE TABLE MATHANG(
		ID INT IDENTITY PRIMARY KEY,
		TEN NVARCHAR(MAX),
		MA NVARCHAR(MAX),
		GIA FLOAT,
		KHUYENMAI FLOAT,
		NHASANXUATID INT ,
			FOREIGN KEY (NHASANXUATID) REFERENCES NHASANXUAT(ID),
		LOAISANPHAMID INT,
			FOREIGN KEY (LOAISANPHAMID) REFERENCES LOAISANPHAM(ID),
		CHITET NVARCHAR(MAX)
	)
GO
	CREATE TABLE ANHSP(
		ID INT IDENTITY PRIMARY KEY,
		MATHANGID INT,
			FOREIGN KEY (MATHANGID) REFERENCES MATHANG(ID),
		SRC NVARCHAR(MAX)
	)
GO
	CREATE TABLE TAIKHOAN(
		ID INT IDENTITY PRIMARY KEY,
		EMAIL NVARCHAR(MAX),
		MATKHAU NVARCHAR(MAX),
		TEN NVARCHAR(MAX),
		QUYEN INT -- 1: Admin, 2: User
	)
GO
	CREATE TABLE NHANXET(
		ID INT IDENTITY PRIMARY KEY,
		TAIKHOANID INT,
			FOREIGN KEY (TAIKHOANID) REFERENCES TAIKHOAN(ID),
		MATHANGID INT,
			FOREIGN KEY (MATHANGID) REFERENCES MATHANG(ID),
		NOIDUNG NVARCHAR(MAX)
	)
GO
	CREATE TABLE DONHANG(
		ID INT IDENTITY PRIMARY KEY,
		MA INT,
		TAIKHOANID INT,
			FOREIGN KEY (TAIKHOANID) REFERENCES TAIKHOAN(ID),
		TONGTIEN INT,
		TRANGTHAI INT --- 0 : DANG DAT HANG, 1: DAT THANH CONG, 2: DA CHUYEN THANH CONG
	)
GO
	CREATE TABLE CHITIETDONHANG(
		ID INT IDENTITY PRIMARY KEY,
		DONHANGID INT,
			FOREIGN KEY (DONHANGID) REFERENCES DONHANG(ID),
		MATHANGID INT,
			FOREIGN KEY (MATHANGID) REFERENCES MATHANG(ID),
		SOLUONG INT,
		THANHTIEN FLOAT
	)
GO